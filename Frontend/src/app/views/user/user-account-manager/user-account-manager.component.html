<div class="pt-3 lg:p-5 mx-3">
    <div class="flex flex-column lg:flex-row justify-content-between align-items-start mb-2">
        <div>
            <div class="text-4xl font-bold">Account Management</div>
            <div class="text-500 mt-3 mb-5">Manage your profile information and verification status</div>
        </div>

        <div class="flex gap-3 justify-content-end md:justify-content-between align-items-center mb-2">
            <!-- <p-button label="Download Empty Template" icon="pi pi-download" variant="outlined" severity="primary"/>
            <p-button label="Download Null Buffers" icon="pi pi-download" variant="outlined" severity="warn"/>
            <p-button label="Bulk CSV Update" icon="pi pi-upload" severity="primary"  variant="outlined"
                routerLink="/product-buffer-levels-bulk-upload" /> -->
            <!-- <p-button label="File New Claim" icon="pi pi-plus" severity="primary" /> -->
        </div>
    </div>

    <div class="card surface-card shadow-3 border-0 border-round-2xl p-6">
        <div class="flex md:justify-content-between align-items-start flex-column md:flex-row mb-3 md:mb-0">
            <div class="flex align-items-center gap-3 mb-3">
                <div>
                    <p-avatar icon="pi pi-shield" size="large"
                        [style]="{ 'background-color': '#ece9fc', color: '#2a1261' }" />
                </div>
                <div>
                    <div class="text-600 font-bold">Verification Status</div>
                    <div class="text-500 mt-1">Your account verification status</div>
                </div>
            </div>
            <div *ngIf="user">
                <p-tag *ngIf="user.verification_status === verificationStatus.UNVERIFIED"
                    icon="pi pi-exclamation-circle" severity="warn" value="Unverified" />
                <p-tag *ngIf="user.verification_status === verificationStatus.PENDING" icon="pi pi-clock"
                    severity="info" value="Pending Verification" />
                <p-tag *ngIf="user.verification_status === verificationStatus.REJECTED" icon="pi pi-ban"
                    severity="danger" value="Rejected" />
                <p-tag *ngIf="user.verification_status === verificationStatus.VERIFIED" icon="pi pi-verified"
                    severity="success" value="Verified" />
            </div>
        </div>

        <div *ngIf="user.verification_status === verificationStatus.PENDING"
            class="bg-blue-50 p-3 border-1 border-blue-300 border-round-lg flex align-content-center justify-content-center mb-4">
            <div class="text-sm text-blue-600">
                <!-- convert from uct -->
                <i class="pi pi-info-circle mr-2"></i> Your verification is under review. Submitted on
                {{ convertDateToLocal(user.date_updated) | nullDisplay}}. We'll
                notify you once the review is complete.
            </div>
        </div>

        <div *ngIf="user.verification_status === verificationStatus.REJECTED">
        <div
            class="bg-red-50 p-3 border-1 border-red-300 border-round-lg flex align-content-center justify-content-center mb-4">
            <div class="text-sm text-red-600">
                <i class="pi pi-info-circle mr-2"></i> Your verification was rejected. Please review your submitted
                information and <a (click)="resubmitForVerification()" class="text-primary cursor-pointer underline">try again</a>.
            </div>
        </div>

        <div class="mt-2">
            <div class="font-semibold text-600">Rejection Reason:</div>
            <div class="text-500 mt-2">{{user.verification_notes || 'No reason provided.'}}</div>
        </div>
    </div>

    <div *ngIf="user.verification_status === verificationStatus.UNVERIFIED"
        class="bg-orange-50 p-3 border-1 border-orange-300 border-round-lg flex align-content-center justify-content-center mb-4">
        <div class="text-sm text-orange-600">
            <i class="pi pi-info-circle mr-2"></i> Kindly <a routerLink="/verify-account"
                class="text-primary cursor-pointer">verify</a> your account to access all features.
        </div>
    </div>

    <div *ngIf="user.verification_status === verificationStatus.VERIFIED"
        class="bg-green-50 p-3 border-1 border-green-300 border-round-lg flex align-content-center justify-content-center mb-4">
        <div class="text-sm text-green-600">
            <i class="pi pi-check-circle mr-2"></i> Your account is verified. You have full access to all features.
        </div>
    </div>
</div>
<div class="grid mt-4">
    <div class="lg:col-8 col-12">
        <div class="card surface-card shadow-3 border-0 border-round-2xl p-6">
            <div class="flex justify-content-between align-items-start">
                <div class="flex align-items-center gap-3">
                    <p-avatar icon="pi pi-user" size="large"
                        [style]="{ 'background-color': '#ece9fc', color: '#2a1261' }" />
                    <div>
                        <div class="text-600 font-semibold mb-2">Profile Information</div>
                        <div class="text-500 mt-1 text-sm md:text-base">Your registered account details</div>
                    </div>
                </div>
                <div pTooltip="Edit Profile" tooltipPosition="bottom">
                    <p-button icon="pi pi-pencil" severity="secondary" outlined="true"
                        (click)="navigateToEdit()"  />
                </div>
            </div>


            <div class="grid mt-5">
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-user mr-2"></i>First Name</div>
                    <div class="text-900 font-semibold">{{user.first_name}}</div>
                </div>
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-user mr-2"></i>Last Name</div>
                    <div class="text-900 font-semibold">{{user.last_name}}</div>
                </div>
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-user mr-2"></i>Other Names</div>
                    <div class="text-900 font-semibold">{{user.other_names | nullDisplay}}</div>
                </div>
                <p-divider class=""></p-divider>
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-envelope mr-2"></i>Email</div>
                    <div class="text-900 font-semibold">{{user.email | nullDisplay}}</div>
                </div>
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-phone mr-2"></i>Phone Number</div>
                    <div class="text-900 font-semibold">{{user.phone_number | nullDisplay}}</div>
                </div>
                <!-- id number -->
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-id-card mr-2"></i>ID Number</div>
                    <div class="text-900 font-semibold">{{user.id_number | nullDisplay}}</div>
                </div>

                <p-divider></p-divider>
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-map-marker mr-2"></i>Address</div>
                    <div class="text-900 font-semibold">{{user.address | nullDisplay}}</div>
                </div>
                <!-- date of birth -->
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-calendar mr-2"></i>Date of Birth</div>
                    <div class="text-900 font-semibold">{{user.date_of_birth | date: 'mediumDate' | nullDisplay}}
                    </div>
                </div>
                <!-- place of birth -->
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-globe mr-2"></i>Place of Birth</div>
                    <div class="text-900 font-semibold">{{user.place_of_birth | nullDisplay}}</div>
                </div>
                <p-divider></p-divider>
                <!-- village of origin -->
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-home mr-2"></i>Village of Origin</div>
                    <div class="text-900 font-semibold">{{user.village_of_origin | nullDisplay}}</div>
                </div>
                <!-- date joined -->
                <div class="col-12 md:col-6 lg:col-4 mb-3">
                    <div class="text-500 font-medium mb-2"><i class="pi pi-calendar mr-2"></i>Date Joined</div>
                    <div class="text-900 font-semibold">{{user.date_created | date: 'medium' | nullDisplay}}</div>
                </div>

            </div>
        </div>
    </div>
    <div class="lg:col-4 col-12">
        <div class="card surface-card p-4 px-5 shadow-3 border-round-xl flex flex-column gap-5">
            <div class="font-bold text-lg text-700">
                Uploaded ID Document
            </div>
            <div class="text-cyan-700">
                <div *ngIf="pdfUrl">
                    <img [src]="pdfUrl" alt="No Preview Available" class="w-full h-auto" />
                </div>
                <div *ngIf="!pdfUrl">
                    <div>
                        <i class="pi pi-info-circle mr-2"></i>No document preview available.
                    </div>
                    </div>
            </div>
        </div>
        <div class="card surface-card p-4 px-5 shadow-3 border-round-xl w-full">
                <div class=" text-2xl text-900 mb-4">
                    Account verification Timeline
                </div>
                <app-verification-tracking [user]="user"></app-verification-tracking>
            </div>
    </div>

</div>
</div>